<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greenlytics - EcoPoints Page</title>
    <style>
        :root {
            --color-primary: hsl(160, 84%, 39%);
            --color-primary-light: hsl(160, 84%, 95%);
            --color-primary-dark: hsl(160, 84%, 25%);
            --color-secondary: hsl(217, 91%, 60%);
            --color-secondary-light: hsl(217, 91%, 95%);
            --color-background: hsl(220, 13%, 8%);
            --color-surface: hsl(220, 13%, 10%);
            --color-surface-elevated: hsl(220, 13%, 12%);
            --color-text-primary: hsl(220, 9%, 95%);
            --color-text-secondary: hsl(220, 9%, 75%);
            --color-text-muted: hsl(220, 9%, 60%);
            --color-border: hsl(220, 13%, 20%);
            --color-border-light: hsl(220, 13%, 15%);
            --color-success: hsl(142, 76%, 36%);
            --color-warning: hsl(38, 92%, 50%);
            --color-error: hsl(0, 84%, 60%);
            --color-bronze: #cd7f32;
            --color-bronze-light: hsl(30, 60%, 15%);
            --color-silver: #c0c0c0;
            --color-silver-light: hsl(0, 0%, 15%);
            --color-gold: #ffd700;
            --color-gold-light: hsl(48, 100%, 15%);
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --space-3xl: 4rem;
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
            --transition-fast: 150ms ease-out;
            --transition-normal: 250ms ease-out;
            --transition-slow: 350ms ease-out;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--color-background);
            color: var(--color-text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-lg);
        }

        header {
            background: var(--color-surface-elevated);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--color-border-light);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md) var(--space-lg);
            max-width: 1200px;
            margin: 0 auto;
        }

        .new-scan {
            background: none;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-weight: 600;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            font-size: 14px;
        }

        .new-scan:hover {
            background: var(--color-primary);
            color: var(--color-background);
            transform: translateY(-2px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .logo .leaf {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-md);
        }

        .logo .leaf::before {
            content: "üçÉ";
            font-size: 24px;
        }

        .logo h1 {
            margin: 0;
            font-size: 28px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }

        .page-title {
            text-align: center;
            margin: var(--space-xl) 0;
            color: var(--color-text-primary);
        }

        .page-title h2 {
            font-size: 2.5rem;
            margin: 0;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .page-title p {
            color: var(--color-text-secondary);
            font-size: 1.1rem;
            margin-top: var(--space-sm);
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
            border: 1px solid var(--color-border);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .card-header {
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            color: white;
            padding: var(--space-lg);
            text-align: center;
            position: relative;
        }

        .card-header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid var(--color-success);
        }

        .card-header h2 {
            margin: 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            font-weight: 600;
        }

        .card-content {
            padding: var(--space-xl);
        }

        .summary-total {
            text-align: center;
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: var(--space-sm);
        }

        .summary-label {
            text-align: center;
            color: var(--color-text-muted);
            margin-bottom: var(--space-xl);
            font-size: 1.1rem;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
            padding: var(--space-lg);
            background: var(--color-surface-elevated);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            font-size: 0.9rem;
            color: var(--color-text-muted);
            margin-bottom: var(--space-xs);
        }

        .detail-value {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 1.1rem;
        }

        .products-section h4 {
            color: var(--color-text-primary);
            margin-bottom: var(--space-md);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .products-section h4::before {
            content: "üå±";
            font-size: 1.2rem;
        }

        .product-item {
            background: var(--color-surface-elevated);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--color-border);
            transition: all var(--transition-fast);
        }

        .product-item:hover {
            background: var(--color-primary-light);
            border-color: var(--color-primary);
            transform: translateX(4px);
        }

        .product-info .name {
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--space-xs);
        }

        .product-tag {
            font-size: 0.8rem;
            background: var(--color-primary);
            color: white;
            padding: var(--space-xs) var(--space-sm);
            border-radius: 999px;
            font-weight: 500;
        }

        .product-points {
            color: var(--color-success);
            font-weight: 700;
            font-size: 1.2rem;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            background: var(--color-surface-elevated);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
            transition: all var(--transition-fast);
        }

        .leaderboard-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-md);
        }

        .leaderboard-item.rank-1 {
            background: linear-gradient(135deg, var(--color-gold-light), var(--color-surface-elevated));
            border-color: var(--color-gold);
        }

        .leaderboard-item.rank-2 {
            background: linear-gradient(135deg, var(--color-silver-light), var(--color-surface-elevated));
            border-color: var(--color-silver);
        }

        .leaderboard-item.rank-3 {
            background: linear-gradient(135deg, var(--color-bronze-light), var(--color-surface-elevated));
            border-color: var(--color-bronze);
        }

        .leaderboard-left {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            background: var(--color-border);
            color: var(--color-text-primary);
        }

        .rank-1 .rank-badge {
            background: linear-gradient(135deg, var(--color-gold), #ffed4a);
            color: var(--color-background);
        }

        .rank-2 .rank-badge {
            background: linear-gradient(135deg, var(--color-silver), #e2e8f0);
            color: var(--color-background);
        }

        .rank-3 .rank-badge {
            background: linear-gradient(135deg, var(--color-bronze), #f6ad55);
            color: var(--color-background);
        }

        .username {
            font-weight: 600;
            color: var(--color-text-primary);
            font-size: 1.1rem;
        }

        .user-points {
            color: var(--color-success);
            font-weight: 700;
            font-size: 1.2rem;
        }

        .leaderboard-item.current-user {
    border: 2px solid var(--color-primary);
    box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.2);
}

.current-user .username::after {
    content: " (You)";
    color: var(--color-primary);
}

        .tier-section {
            margin-top: var(--space-2xl);
            text-align: center;
        }

        .tier-section h3 {
            font-size: 2rem;
            color: var(--color-text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .tier-section h3::before {
            content: "üèÜ";
            font-size: 2rem;
        }

        .tier-description {
            color: var(--color-text-secondary);
            margin-bottom: var(--space-xl);
            font-size: 1.1rem;
        }

        .current-tier {
            color: var(--color-success);
            font-weight: 700;
        }

        .tier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-xl);
            margin-top: var(--space-xl);
        }

        .tier-card {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            border: 2px solid var(--color-border);
            position: relative;
        }

        .tier-card.current {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 4px rgba(52, 211, 153, 0.1);
            transform: scale(1.05);
        }

        .tier-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .tier-card.current::before {
            content: "CURRENT";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-primary);
            color: white;
            padding: var(--space-xs) var(--space-md);
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .tier-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-md);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            box-shadow: var(--shadow-md);
        }

        .tier-card.bronze .tier-icon {
            background: linear-gradient(135deg, var(--color-bronze), #f6ad55);
        }

        .tier-card.silver .tier-icon {
            background: linear-gradient(135deg, var(--color-silver), #e2e8f0);
        }

        .tier-card.gold .tier-icon {
            background: linear-gradient(135deg, var(--color-gold), #ffed4a);
        }

        .tier-card h4 {
            font-size: 1.5rem;
            margin-bottom: var(--space-sm);
            color: var(--color-text-primary);
        }

        .tier-range {
            color: var(--color-text-muted);
            margin-bottom: var(--space-lg);
            font-size: 1.1rem;
        }

        .benefits-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .benefit {
            background: var(--color-surface-elevated);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            color: var(--color-text-secondary);
            font-weight: 500;
            border: 1px solid var(--color-border);
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--color-success), var(--color-primary));
            color: white;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            display: none;
            max-width: 400px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
            
            .tier-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: var(--space-md);
            }
            
            .header-content {
                padding: var(--space-sm) var(--space-md);
            }
            
            .page-title h2 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <button class="new-scan" onclick="window.location.href='/'">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                New Scan
            </button>
            <div class="logo">
                <!-- <div class="leaf"></div> -->
                <h1>Greenlytics</h1>
            </div>
            <div></div>
        </div>
    </header>

    <div class="container">
        <div class="page-title">
            <h2>Your EcoPoints Dashboard</h2>
            <p>Track your environmental impact and rewards</p>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <h2>üèÜ Your EcoPoints Summary</h2>
                </div>
                <div class="card-content">
                    <div class="summary-total">+53</div>
                    <div class="summary-label">EcoPoints Earned This Purchase</div>
                    
                    <div class="details-grid">
                        <div class="detail-item">
                            <div class="detail-label">Invoice Number</div>
                            <div class="detail-value">#INV001</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Purchase Date</div>
                            <div class="detail-value">14/07/2025</div>
                        </div>
                    </div>
                    
                    <div class="products-section">
                        <h4>Eco-Friendly Products</h4>
                        <div class="product-item">
                            <div class="product-info">
                                <div class="name">Organic Apples</div>
                                <span class="product-tag">Organic Food</span>
                            </div>
                            <div class="product-points">+25</div>
                        </div>
                        <div class="product-item">
                            <div class="product-info">
                                <div class="name">Bamboo Toothbrush</div>
                                <span class="product-tag">Sustainable Products</span>
                            </div>
                            <div class="product-points">+15</div>
                        </div>
                        <div class="product-item">
                            <div class="product-info">
                                <div class="name">Recycled Paper Towels</div>
                                <span class="product-tag">Eco-Friendly</span>
                            </div>
                            <div class="product-points">+10</div>
                        </div>
                        <div class="product-item">
                            <div class="product-info">
                                <div class="name">Glass Food Containers</div>
                                <span class="product-tag">Reusable</span>
                            </div>
                            <div class="product-points">+3</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>üåüCommunity Leaderboardüåü</h2>
                </div>
                <div class="card-content">
                    <div class="leaderboard-item rank-1">
                        <div class="leaderboard-left">
                            <div class="rank-badge">1</div>
                            <span class="username">Riya Sharma</span>
                        </div>
                        <span class="user-points">1,350 pts</span>
                    </div>
                    <div class="leaderboard-item rank-2">
                        <div class="leaderboard-left">
                            <div class="rank-badge">2</div>
                            <span class="username">Arjun Verma</span>
                        </div>
                        <span class="user-points">980 pts</span>
                    </div>
                    <div class="leaderboard-item rank-3">
                        <div class="leaderboard-left">
                            <div class="rank-badge">3</div>
                            <span class="username">Ashley Thomas</span>
                        </div>
                        <span class="user-points">589 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-left">
                            <div class="rank-badge">4</div>
                            <span class="username">Vaidik Jaiswal</span>
                        </div>
                        <span class="user-points">720 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-left">
                            <div class="rank-badge">5</div>
                            <span class="username">Dev Mishra</span>
                        </div>
                        <span class="user-points">650 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-left">
                            <div class="rank-badge">6</div>
                            <span class="username">Aarya Gupta</span>
                        </div>
                        <span class="user-points">580 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-left">
                            <div class="rank-badge">7</div>
                            <span class="username">Rahul Desai</span>
                        </div>
                        <span class="user-points">520 pts</span>
                    </div>
                    <div class="leaderboard-item">
                        <div class="leaderboard-left">
                            <div class="rank-badge">8</div>
                            <span class="username">Neha Kapoor</span>
                        </div>
                        <span class="user-points">450 pts</span>
                    </div>
                </div>
            </div>
        </div>


        <div class="tier-section">
            <h3>Tier System & Rewards</h3>
            <p class="tier-description">
                Your current tier: <span class="current-tier">Bronze</span> | 
                Next tier: Silver (212 points to go!)
            </p>
            
            <div class="tier-grid">
                <div class="tier-card bronze current">
                    <div class="tier-icon">ü•â</div>
                    <h4>Bronze</h4>
                    <p class="tier-range">300-800 points</p>
                    <div class="benefits-list">
                        <div class="benefit">Basic eco-tips access</div>
                        <div class="benefit">Monthly newsletter</div>
                        <div class="benefit">Community forum access</div>
                    </div>
                </div>

                <div class="tier-card silver">
                    <div class="tier-icon">ü•à</div>
                    <h4>Silver</h4>
                    <p class="tier-range">801 - 1300 points</p>
                    <div class="benefits-list">
                        <div class="benefit">5% discount on eco-products</div>
                        <div class="benefit">Priority customer support</div>
                        <div class="benefit">Advanced sustainability reports</div>
                        <div class="benefit">Early access to new features</div>
                    </div>
                </div>

                <div class="tier-card gold">
                    <div class="tier-icon">ü•á</div>
                    <h4>Gold</h4>
                    <p class="tier-range">1301+ points</p>
                    <div class="benefits-list">
                        <div class="benefit">10% discount on all products</div>
                        <div class="benefit">VIP customer support</div>
                        <div class="benefit">Exclusive product launches</div>
                        <div class="benefit">Personal sustainability coach</div>
                        <div class="benefit">Carbon offset certificates</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <strong>üéâ Congratulations!</strong><br>
        You've earned 53 EcoPoints for your sustainable choices!
    </div>

   <script>
    // Fetch and display user data when page loads
    window.addEventListener('DOMContentLoaded', async () => {
        try {
            const userId = localStorage.getItem("userId");
            const userName = localStorage.getItem("userName");
            
            if (!userId) {
                console.warn("User not logged in");
                window.location.href = "/login-page";
                return;
            }

            // Fetch current user's data
            const userResponse = await fetch(`/user/${userId}`);
            const userData = await userResponse.json();
            
            // Fetch leaderboard data
            const leaderboardResponse = await fetch(`/leaderboard?user_id=${userId}`);
            const leaderboardData = await leaderboardResponse.json();

            // Update the dashboard
            updateUserDashboard(userData, userName);
            updateLeaderboard(leaderboardData, userId);
            updateTierSection(userData);

            // Show toast if new points were earned
            if (localStorage.getItem("newPointsEarned")) {
                showPointsEarnedToast(localStorage.getItem("newPointsEarned"));
                localStorage.removeItem("newPointsEarned");
            }

        } catch (error) {
            console.error("Error loading dashboard:", error);
        }
    });

    function updateUserDashboard(userData, userName) {
        // Update summary section
        document.querySelector('.summary-total').textContent = `+${userData.last_points_earned || 28}`;
        document.querySelector('.detail-value:nth-of-type(1)').textContent = userData.last_invoice || "#INV001";
        document.querySelector('.detail-value:nth-of-type(2)').textContent = userData.last_purchase_date || new Date().toLocaleDateString();
        
        // Update products list
        const productsContainer = document.querySelector('.products-section');
        let productsHtml = '<h4>Eco-Friendly Products</h4>';
        
        userData.last_products?.forEach(product => {
            productsHtml += `
                <div class="product-item">
                    <div class="product-info">
                        <div class="name">${product.name}</div>
                        <span class="product-tag">${product.category}</span>
                    </div>
                    <div class="product-points">+${product.points}</div>
                </div>
            `;
        });
        
        productsContainer.innerHTML = productsHtml;
    }

    function updateLeaderboard(users, currentUserId) {
        const container = document.querySelector('.card-content');
        let html = '';

        users.forEach((user, index) => {
            const isCurrent = user.user_id === currentUserId;
            const rankClass = index < 3 ? `rank-${index + 1}` : '';
            
            html += `
                <div class="leaderboard-item ${rankClass} ${isCurrent ? 'current-user' : ''}">
                    <div class="leaderboard-left">
                        <div class="rank-badge">${index + 1}</div>
                        <span class="username">
                            ${user.name} ${isCurrent ? '(You)' : ''}
                        </span>
                    </div>
                    <span class="user-points">${user.eco_points || 0} pts</span>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    function updateTierSection(userData) {
        const currentTier = getTier(userData.eco_points);
        const nextTier = getNextTier(currentTier);
        const pointsNeeded = getPointsNeeded(currentTier, userData.eco_points);
        
        // Update tier description
        document.querySelector('.current-tier').textContent = currentTier;
        document.querySelector('.tier-description').innerHTML = `
            Your current tier: <span class="current-tier">${currentTier}</span> | 
            ${nextTier ? `Next tier: ${nextTier} (${pointsNeeded} points to go!)` : 'You\'ve reached the highest tier!'}
        `;
        
        // Highlight current tier card
        document.querySelectorAll('.tier-card').forEach(card => {
            card.classList.remove('current');
            if (card.classList.contains(currentTier.toLowerCase())) {
                card.classList.add('current');
            }
        });
    }

    function getTier(points) {
        if (points >= 300) return 'Gold';
        if (points >= 100) return 'Silver';
        return 'Bronze';
    }

    function getNextTier(currentTier) {
        const tiers = ['Bronze', 'Silver', 'Gold'];
        const currentIndex = tiers.indexOf(currentTier);
        return currentIndex < tiers.length - 1 ? tiers[currentIndex + 1] : null;
    }

    function getPointsNeeded(currentTier, currentPoints) {
        switch(currentTier) {
            case 'Bronze': return Math.max(0, 100 - currentPoints);
            case 'Silver': return Math.max(0, 300 - currentPoints);
            default: return 0;
        }
    }

    function showPointsEarnedToast(points) {
        const toast = document.getElementById('toast');
        toast.innerHTML = `<strong>üéâ Congratulations!</strong><br>You've earned ${points} EcoPoints!`;
        toast.style.display = 'block';
        
        setTimeout(() => {
            toast.style.animation = 'slideIn 0.3s ease-out reverse';
            setTimeout(() => {
                toast.style.display = 'none';
                toast.style.animation = 'slideIn 0.3s ease-out';
            }, 300);
        }, 5000);
    }

    // Existing hover effects
    document.querySelectorAll('.product-item').forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.transform = 'translateX(8px)';
        });
        item.addEventListener('mouseleave', function() {
            this.style.transform = 'translateX(0)';
        });
    });
</script>
</body>
</html>